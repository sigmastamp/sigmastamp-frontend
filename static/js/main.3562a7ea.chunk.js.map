{"version":3,"sources":["components/Loader.tsx","components/AsyncContentComponent.tsx","components/QRCode.tsx","components/PaymentGate.tsx","components/PdfPage.tsx","components/UploadZone.tsx","utils/readFile.tsx","utils/getAsByteArray.tsx","utils/uint8ArrayToHex.tsx","hash/blake2b256.ts","oracles/_AbstractBlockcyptherOracle.ts","oracles/BitcoinOracle.ts","oracles/DateOracle.ts","oracles/EthereumOracle.ts","oracles/LitecoinOracle.ts","oracles/NytimesOracle.ts","smartcontracts/compileErgoScript.ts","smartcontracts/createScript.ts","smartcontracts/getCurrentBlockchainHeight.ts","smartcontracts/isUserAddressCorrect.ts","smartcontracts/createSigmaStampNft.ts","App.tsx","smartcontracts/validateFirstCertificate.ts","VerifyApp.tsx","index.tsx"],"names":["Loader","LoaderDiv","className","styled","div","AsyncContentComponent","loading","content","React","state","setState","a","factorable","QRCode","props","ref","canvasElement","options","text","color","QRCodeGenerator","toCanvas","error","console","PaymentGate","amount","address","dueTime","PaymentGateDiv","PdfPage","pageRef","useRef","createUi","createPdf","doc","jsPDF","current","innerText","output","PdfPageDiv","children","UploadZone","uploadClick","this","onFile","onFiles","onFileOver","onFilesOver","clickable","onFileOverMaybe","isFileOver","UploadZoneDiv","onClick","onDragEnter","event","stopPropagation","preventDefault","onDragOver","onDragExit","onDragEnd","onDrop","files","Array","from","dataTransfer","type","element","click","onChange","target","readFile","file","Promise","resolve","reject","reader","FileReader","addEventListener","result","readAsArrayBuffer","getAsByteArray","Uint8Array","uint8ArrayToHex","uint8Array","map","x","toString","padStart","join","blake2b256","input","context","blake2bInit","blake2bUpdate","hashUint8Array","blake2bFinal","hash","AbstractBlockcyptherOracle","name","title","dataTitles","ttl","fetch","toLowerCase","response","json","body","Error","BitcoinOracle","DateOracle","date","time","Date","getUTCFullYear","getUTCMonth","slice","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","EthereumOracle","LitecoinOracle","NytimesOracle","firstTitle","rssParser","RssParser","parseURL","feed","items","compileErgoScript","script","JSON","stringify","trim","split","method","headers","compilerResponse","compilerResponseBody","success","detail","createScript","Object","entries","filter","key","value","scriptArray","length","match","param","substring","getCurrentBlockchainHeight","isUserAddressCorrect","userAddress","createSigmaStampNft","documentHashInBase64","documentHashInHex","mintingFee","ergsSendTogetherWithNFT","ergsFeeForSigmaStampService","sigmaStampProviderAddress","assetTypeValue","returnTransactionFee","sigmaStampAssemblerNodeAddr","refundHeightThreshold","log","compiledSmartContractAddress","ergoAmountRequired","documentHashInErgoFormat","verifyLinkInErgoFormat","requestBody","returnTo","startWhen","erg","txSpec","requests","ergValue","decimals","description","registers","R7","R8","R9","fee","inputs","dataInputs","followResponse","followResponseBody","id","getStatus","watchResponse","watchResponseBody","tx","ORACLES","App","useState","payment","setPayment","AppDiv","File","certificateFile","zip","JSZip","generateAsync","zipBlob","zipHash","saveAs","prompt","oracle","getData","data","to","validateFirstCertificate","firstCertificate","item","additionalRegisters","getTransactionTime","txId","timestamp","summary","tokenId","outputs","assets","getAssetHolders","VerifyApp","setFiles","verification","setVerification","hodlers","VerifyAppDiv","droppedFiles","droppedFileVerification","alert","history","createHashHistory","HeaderElement","header","ReactDOM","render","StrictMode","exact","path","document","getElementById"],"mappings":"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","file":"static/js/main.3562a7ea.chunk.js","sourcesContent":["import * as React from 'react';\nimport styled from 'styled-components';\n\nexport function Loader() {\n    return (\n        <LoaderDiv>\n            {/* TODO: Please @roseckyj  loader that would cover only its area not the whole modal, */}\n            {/* TODO: Please @roseckyj make it universal to use it in every layout type - small icon, fullscreen, modal, etc,... */}\n            {/* TODO: Please @roseckyj untite with LoaderInline */}\n            <div className=\"spinner\"></div>\n        </LoaderDiv>\n    );\n}\n\nconst LoaderDiv = styled.div``;\n","import * as React from 'react';\nimport { Loader } from './Loader';\n\nexport type IAwaitable<T> = T | Promise<T>;\n\nexport type IFactory<T> = () => T;\n\nexport type IFactorable<T> = T | IFactory<T>;\n\nexport function factor<T>(factorable: IFactorable<T>): T {\n    if (typeof factorable === 'function') {\n        return (factorable as any)();\n    } else {\n        return factorable;\n    }\n}\n\ninterface IAsyncContentComponentProps {\n    /**\n     * Component to be rendered before the content is loaded\n     *\n     * If not set, default loading is used\n     */\n    loading?: JSX.Element;\n\n    /**\n     * The async content to be rendered\n     */\n    content: IFactorable<IAwaitable<JSX.Element>>;\n}\n\ninterface IAsyncContentComponentState {\n    content: JSX.Element;\n}\n\n/**\n * Utility for mounting RxJS observable content\n *\n * @collboard-modules-sdk\n */\nexport function AsyncContentComponent({\n    loading,\n    content,\n}: IAsyncContentComponentProps) {\n    const [state, setState] = React.useState<IAsyncContentComponentState>({\n        content: loading || <Loader />,\n    });\n\n    React.useEffect(() => {\n        (async () => {\n            setState({ content: await factor(content) });\n        })();\n\n        return () => {\n            /* TODO: Can here be some reasonable teardown logic? */\n        };\n    }, [content]);\n\n    return <>{state.content}</>;\n}\n","import QRCodeGenerator, { QRCodeRenderersOptions } from 'qrcode';\nimport * as React from 'react';\n\ninterface IQRCodeProps extends QRCodeRenderersOptions {\n    text: string;\n}\n\nexport function QRCode(props: IQRCodeProps) {\n    return (\n        <canvas\n            ref={(canvasElement) => {\n                if (!canvasElement) {\n                    return;\n                }\n\n                // Note: Making some manipulation (probbably) due to internal errors of qrcode library\n                const options: QRCodeRenderersOptions = { ...props };\n                delete (options as any).text;\n                options.color = options.color || {};\n\n                QRCodeGenerator.toCanvas(canvasElement, props.text, options, (error) => {\n                    if (error) {\n                        console.error(error);\n                    }\n                    // console.log('success!');\n                });\n            }}\n        />\n    );\n}\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport { QRCode } from './QRCode';\n\nexport interface IPaymentGateProps {\n    amount: number;\n    address: string;\n    dueTime: number /* TODOL Date */;\n    //getStatus: () => Promise<boolean /* full status in future */>;\n}\n\nexport function PaymentGate({\n    amount,\n    address,\n    dueTime /*, getStatus*/,\n}: IPaymentGateProps) {\n    // TODO: !!! Deal up in design in superlong addreses like UegztxGAXchyKXtaZYFkGWxDnCpMD329qSNk4YVrc8wrwitM58WVocMT59rPSasNZJwezshytQ74pq9JF8uUGGYHJW64hbooxY54dDCRZnFVqFvXGcj1jUhkXpuYuVaDY1b6LcXq9zRCZCiXZ36Gswg2TqcgZRE1B5ZxUrKSd19XykEfsgx5eWW3k7MDiLxvisPqMxqpZtP8UHvgwucJxZ4Bg86xWC3v4kXVC6o9mkg7z64MqiQy1FrqHvY65mr7UgG1vK8q37mDcgZPkDc7BKmsKSLynXgDNsqT8yirvxmsCU9o5wMsF8BoFPxUnjPGLAp7yBwnqtvXowq3o4pYnc4h93irPEHqbTySBgLSEwFzgRgbVrXtE8FaL1q2LVyg7rbHJHzvjVfJMyQDSGQwecG6iWybNUv9sP7SKanHegS4wn8xKaBGrSmqTNk4aPpRXvGTr6rikYxmTYDmQru6tJSebRUf7mhsbtp3xTngEgFtPVCMQTnuuNtszbtHnMHGxfPntz8gEqfKFjHrM1LSCkWxuiYx92Nj7EHFY5vnM7\n    return (\n        <PaymentGateDiv>\n            <QRCode\n                text={`https://explorer.ergoplatform.com/payment-request?address=${address}&amount=${amount}`}\n            />\n            Pay {amount} ERG to address {address} in ${dueTime} seconds.\n            {/*<button\n                onClick={async () => {\n                    const status = await getStatus();\n                    if (status) {\n                        alert(`Payed`)!;\n                    }\n                }}\n            ></button>*/}\n        </PaymentGateDiv>\n    );\n}\n\nconst PaymentGateDiv = styled.div`\n    font-size: 11px;\n    width: 500px;\n`;\n","import { jsPDF } from 'jspdf';\nimport React, { useRef } from 'react';\nimport styled from 'styled-components';\nimport { IAwaitable } from './AsyncContentComponent';\n//import html2canvas from 'html2canvas';\n\ninterface IPdfPageProps extends React.PropsWithChildren<{}> {\n    createUi: (options: {\n        createPdf: () => Promise<Blob>;\n    }) => IAwaitable<JSX.Element | JSX.Element[]>;\n}\n\nexport function PdfPage(props: IPdfPageProps) {\n    const pageRef = useRef(null);\n\n    return (\n        <div>\n            {props.createUi({\n                createPdf: async () => {\n                    const doc = new jsPDF();\n\n                    // TODO: !!! Through nice html2canvas\n\n                    //const canvas = await html2canvas(pageRef!.current!);\n                    //const image = canvas.toDataURL();\n\n                    // !!! document.body.appendChild(canvas);\n\n                    //doc.addImage(image, 'JPEG', 0, 0, 210, 297);\n                    //doc.html((pageRef!.current as any).innerHTML, { x: 10, y: 10 });\n\n                    //console.log(pageRef!.current as any);\n                    //console.log((pageRef!.current as any).innerText);\n                    //doc.html((pageRef!.current as any).innerHTML, { x: 10, y: 10 });\n                    doc.text((pageRef!.current as any).innerText, 10, 10);\n\n                    return doc.output('blob');\n                },\n            })}\n            <PdfPageDiv ref={pageRef}>{props.children}</PdfPageDiv>\n        </div>\n    );\n}\n\nconst PdfPageDiv = styled.div`\n    width: ${210 * 2}px;\n    height: ${297 * 2}px;\n    border: 2px solid #009edf;\n\n    background-color: white;\n    color: black;\n`;\n","import * as React from 'react';\nimport styled from 'styled-components';\n\nexport type IUploadZoneProps = React.PropsWithChildren<{\n    clickable?: boolean;\n    onFilesOver?: (isFileOver: boolean) => void;\n    onFiles: (droppedFiles: File[]) => void;\n}>;\n\n// TODO: !!! Use hooks and functional coponent ONLY in whole project\n\nexport class UploadZone extends React.Component<IUploadZoneProps> {\n    render() {\n        const {\n            children,\n            onFiles: onFile,\n            onFilesOver: onFileOver,\n            clickable,\n        } = this.props;\n        const onFileOverMaybe = (isFileOver: boolean) => {\n            if (onFileOver) {\n                onFileOver(isFileOver);\n            }\n        };\n\n        let uploadClick: () => void;\n\n        return (\n            <UploadZoneDiv\n                onClick={() => {\n                    if (clickable) {\n                        uploadClick();\n                    }\n                }}\n                onDragEnter={(event) => {\n                    event.stopPropagation();\n                    event.preventDefault();\n                }}\n                onDragOver={(event) => {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    onFileOverMaybe(true);\n                }}\n                onDragExit={(event) => {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    onFileOverMaybe(false);\n                }}\n                onDragEnd={(event) => {\n                    event.stopPropagation();\n                    event.preventDefault();\n                }}\n                onDrop={(event) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    onFileOverMaybe(false);\n\n                    const files = Array.from(event.dataTransfer.files); // TODO: Maybe there should be event.dataTransfer.items handler\n                    onFile(files);\n                }}\n            >\n                <input\n                    type=\"file\"\n                    ref={(element) => {\n                        if (element) {\n                            uploadClick = () => {\n                                onFileOverMaybe(true);\n                                (element as HTMLInputElement).click();\n                            };\n                        }\n                    }}\n                    onChange={(event) => {\n                        if (!event || !event.target || !event.target.files)\n                            return;\n                        onFile(Array.from(event.target.files));\n                    }}\n                />\n\n                {children}\n            </UploadZoneDiv>\n        );\n    }\n}\n\nconst UploadZoneDiv = styled.div`\n    width: ${210}px;\n    height: ${297}px;\n    padding: 10px;\n    border: 5px dashed #009edf;\n\n    input {\n        display: none;\n    }\n`;\n","export function readFile(file: File | Blob): Promise<ArrayBuffer> {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n\n        reader.addEventListener('loadend', (event) =>\n            resolve(event.target!.result as ArrayBuffer),\n        );\n        reader.addEventListener('error', reject);\n\n        reader.readAsArrayBuffer(file);\n    });\n}\n","import { readFile } from './readFile';\n\nexport async function getAsByteArray(file: File | Blob): Promise<Uint8Array> {\n    return new Uint8Array(await readFile(file));\n}\n","export function uint8ArrayToHex(uint8Array: Uint8Array) {\n    return [...uint8Array].map((x) => x.toString(16).padStart(2, '0')).join('');\n}\n","// @ts-ignore: no typings\nimport { blake2bFinal, blake2bInit, blake2bUpdate } from 'blakejs';\nimport { getAsByteArray } from '../utils/getAsByteArray';\nimport { uint8ArrayToHex } from '../utils/uint8ArrayToHex';\n\nexport async function blake2b256(input: File | Blob): Promise<string> {\n    const KEY = null; // optional key\n    const OUTPUT_LENGTH = 32; // bytes\n    const context = blake2bInit(OUTPUT_LENGTH, KEY);\n\n    // each time you get a byte array from the stream:\n    blake2bUpdate(context, await getAsByteArray(input));\n\n    // finally, once the stream has been exhausted\n    const hashUint8Array = blake2bFinal(context);\n    // returns a 64-byte hash, as a Uint8Array\n\n    const hash = uint8ArrayToHex(hashUint8Array);\n\n    return hash;\n}\n","import { IOracle } from './_IOracle';\n\nexport abstract class AbstractBlockcyptherOracle\n    implements IOracle<{ hash: string }>\n{\n    public abstract name: string;\n    public abstract title: string;\n\n    public dataTitles = { hash: 'Current block hash' };\n    public ttl = -1;\n\n    public async getData() {\n        const response = await fetch(\n            `https://api.blockcypher.com/v1/${this.name.toLowerCase()}/main` /*`https://blockchain.info/latestblock`*/,\n            /*{ mode: 'no-cors' }*/\n        );\n        // console.log({ response });\n        const body = await response.json();\n\n        if (body.error) {\n            throw new Error(body.error);\n        }\n\n        const { hash } = body;\n        return { hash };\n    }\n}\n","import { AbstractBlockcyptherOracle } from './_AbstractBlockcyptherOracle';\n\nexport class BitcoinOracle extends AbstractBlockcyptherOracle {\n    public name = 'BTC';\n    public title = 'Bitcoin';\n}\n","import { IOracle } from './_IOracle';\n\nexport class DateOracle implements IOracle<{ date: string; time: string }> {\n    public name = 'DATE';\n    public title = 'Current';\n    public ttl = 1;\n\n    public dataTitles = { date: 'date', time: 'time' };\n\n    public getData() {\n        const date = new Date();\n        return {\n            date: `${date.getUTCFullYear()}-${('0' + date.getUTCMonth()).slice(\n                -2,\n            )}-${('0' + date.getUTCDate()).slice(-2)}`,\n            time: `${('0' + date.getUTCHours()).slice(-2)}:${(\n                '0' + date.getUTCMinutes()\n            ).slice(-2)}:${('0' + date.getUTCSeconds()).slice(-2)}`,\n        };\n    }\n}\n","import { AbstractBlockcyptherOracle } from './_AbstractBlockcyptherOracle';\n\nexport class EthereumOracle extends AbstractBlockcyptherOracle {\n    public name = 'ETH';\n    public title = 'Ethereum';\n}\n","import { AbstractBlockcyptherOracle } from './_AbstractBlockcyptherOracle';\n\nexport class LitecoinOracle extends AbstractBlockcyptherOracle {\n    public name = 'LTC';\n    public title = 'Litecoin';\n}\n","import RssParser from 'rss-parser';\nimport { IOracle } from './_IOracle';\n\nexport class NytimesOracle implements IOracle<{ firstTitle: string }> {\n    public name = 'NYTIMES';\n    public title = 'The New York Times';\n    public ttl = -1;\n\n    public dataTitles = { firstTitle: 'first title' };\n\n    public async getData() {\n        const rssParser = new RssParser();\n        const feed = await rssParser.parseURL(\n            `https://rss.nytimes.com/services/xml/rss/nyt/World.xml`,\n        );\n\n        // console.log({ feed });\n\n        return {\n            firstTitle: feed.items[0].title as string,\n        };\n    }\n}\n","import {\n    ergo_scala_script,\n    ergo_script_address,\n} from '../interfaces/stringTypes';\n\n/**\n * Copiles source in scala to Ergo3 adress format\n * @param source in scala\n */\nexport async function compileErgoScript({\n    script,\n}: {\n    script: ergo_scala_script;\n}): Promise<{ address: ergo_script_address }> {\n    const body = JSON.stringify(script.trim())\n        // TODO: !!! Is this required\n        .split('^\\n')\n        .join('\\n')\n        .split('\\n\\n')\n        .join('\\n');\n\n    // TODO: !!! Not working compilation\n    const compilerResponse = await fetch(\n        // TODO: !!! http://assembler.sigmastamp.ml:14747 into config\n        // TODO: !!! Running on native port\n        // TODO: !!! HTTPs\n        `http://assembler.sigmastamp.ml:14747/compile`,\n        {\n            method: 'POST',\n            body,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        },\n    );\n\n    const compilerResponseBody = await compilerResponse.json();\n\n    if (compilerResponseBody.success === false) {\n        throw new Error(\n            `Failed to compile Ergo script:\\n${compilerResponseBody.detail}`,\n        );\n    }\n\n    return compilerResponseBody;\n}\n","import { ergo_scala_script, string_href } from '../interfaces/stringTypes';\n\nexport async function createScript<T extends { script: string_href }>(\n    options: T,\n): Promise<{ script: ergo_scala_script }> {\n    const response = await fetch(options.script);\n    let script = await response.text();\n\n    // console.log({ script });\n\n    for (const [key, value] of Object.entries(options).filter(\n        // tslint:disable-next-line:no-shadowed-variable\n        ([key]) => key !== 'script',\n    )) {\n        const scriptArray = script.split(`$${key}`);\n        if (scriptArray.length === 1) {\n            throw new Error(\n                `Could not find param \"${key}\" in the script \"${options.script}\"`,\n            );\n        }\n        script = scriptArray.join(value);\n    }\n\n    // TODO: Probbably extract function replaceParams\n\n    const match = script.match(/\\$[a-zA-Z0-9]+/g);\n    if (match) {\n        throw new Error(\n            `Missing params ${match\n                .map((param) => `\"${param.substring(1)}\"`)\n                .join(', ')} for the script \"${options.script}\".`,\n        );\n    }\n\n    return { script };\n}\n","export async function getCurrentBlockchainHeight(): Promise<number> {\n    // TODO: Implement, value is hardcoded\n    return 0;\n}\n","import { ergo_wallet_address } from \"../interfaces/stringTypes\";\n\nexport async function isUserAddressCorrect(\n    userAddress: ergo_wallet_address,\n): Promise<boolean> {\n    // TODO: !!! Implement, value is hardcoded\n    return true;\n}\n","import { ergo_wallet_address } from '../interfaces/stringTypes';\nimport { compileErgoScript } from './compileErgoScript';\nimport { createScript } from './createScript';\nimport { getCurrentBlockchainHeight } from './getCurrentBlockchainHeight';\nimport { isUserAddressCorrect } from './isUserAddressCorrect';\n\ninterface ICreateSigmaStampNft {\n    documentHashInBase64: string;\n    documentHashInHex: string;\n    userAddress: ergo_wallet_address;\n}\n\n/**\n *\n * TODO: !!! Split into more granular pieces\n */\nexport async function createSigmaStampNft({\n    userAddress,\n    documentHashInBase64,\n    documentHashInHex,\n}: ICreateSigmaStampNft) /*: Promise<{ amount: number; address: string }> */ {\n    if (!(await isUserAddressCorrect(userAddress))) {\n        throw new Error(`User address \"${userAddress}\" is not correct.`);\n    }\n\n    const mintingFee = 20000000; /* TODO: User settable */\n    const ergsSendTogetherWithNFT = 100000000; /* TODO: User settable */\n    const ergsFeeForSigmaStampService = 100000000; /* Our fee */\n    const sigmaStampProviderAddress =\n        '3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV';\n    const assetTypeValue = 'Ad4=';\n    const returnTransactionFee = 10000000;\n\n    /**\n     * TODO: !!! unhardcode address\n     */\n    const sigmaStampAssemblerNodeAddr =\n        '3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV';\n    const refundHeightThreshold = (await getCurrentBlockchainHeight()) + 10;\n\n    console.log(\n        JSON.stringify({\n            ergsSendTogetherWithNFT,\n            userAddress,\n            ergsFeeForSigmaStampService,\n            sigmaStampProviderAddress,\n            assetTypeValue,\n            documentHashInBase64,\n            returnTransactionFee,\n            sigmaStampAssemblerNodeAddr,\n            refundHeightThreshold,\n        }),\n    );\n\n    const { script } = await createScript({\n        script: '/scripts/sigmastamp-nft.scala',\n\n        // TODO: Better names for variabiles below (replace everywhere in scala script + here):\n        ergsSendTogetherWithNFT,\n        userAddress,\n        ergsFeeForSigmaStampService,\n        sigmaStampProviderAddress,\n        assetTypeValue,\n        documentHashInBase64,\n        returnTransactionFee,\n        sigmaStampAssemblerNodeAddr,\n        refundHeightThreshold,\n    });\n\n    // console.log(script);\n    const { address: compiledSmartContractAddress } = await compileErgoScript({\n        script,\n    });\n\n    const ergoAmountRequired =\n        ergsSendTogetherWithNFT + ergsFeeForSigmaStampService + mintingFee;\n    const documentHashInErgoFormat = `e20${documentHashInHex}`;\n    const verifyLinkInErgoFormat = `0e61${\n        /* !!! Convert to hex */ `http://sigmastamp.ml/verify?hash=a16d5705c031866f5c5dd1ba39e43538193b45718af5a50a115e1c8d67c209cd`\n    }`;\n\n    // TODO: !!! Separate function for follow\n    const requestBody = {\n        address: compiledSmartContractAddress,\n        returnTo: userAddress,\n        startWhen: { erg: ergoAmountRequired },\n        txSpec: {\n            requests: [\n                {\n                    ergValue: ergsSendTogetherWithNFT,\n                    address: userAddress,\n                    name: 'SigmaStampNFT',\n                    amount: 1,\n                    decimals: 0,\n                    description:\n                        'Proof of existence of document with Blake2b-256 hash specified in R8 register during minting of this NFT token.',\n                    registers: {\n                        R7: '0e0201de',\n                        R8: documentHashInErgoFormat,\n                        R9: verifyLinkInErgoFormat,\n                    },\n                },\n                {\n                    value: ergsFeeForSigmaStampService,\n                    address: sigmaStampProviderAddress,\n                },\n            ],\n            fee: mintingFee,\n            inputs: ['$userIns'],\n            dataInputs: [],\n        },\n    };\n\n    const followResponse = await fetch(\n        `http://assembler.sigmastamp.ml:14747/follow`,\n        {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(requestBody),\n        },\n    );\n\n    const followResponseBody = await followResponse.json();\n    const { id, dueTime } = followResponseBody;\n\n    return {\n        amount: ergoAmountRequired / 1000000000,\n        address: compiledSmartContractAddress,\n        dueTime,\n        async getStatus() {\n            // Loop\n            const watchResponse = fetch(\n                `http://assembler.sigmastamp.ml:14747/result/${id}`,\n            );\n            const watchResponseBody = await followResponse.json();\n            const {\n                /*id,*/ tx,\n                detail /* pending, returning, mined, success, timeout, returnFailed */,\n            } = followResponseBody;\n\n            console.log({ watchResponse, watchResponseBody, tx });\n\n            if (detail === 'success') {\n                // !!! And now take tx and create big certificate\n\n                return true;\n            }\n\n            return false;\n        },\n    };\n}\n","import { saveAs } from 'file-saver';\nimport JSZip from 'jszip';\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { AsyncContentComponent } from './components/AsyncContentComponent';\nimport { IPaymentGateProps, PaymentGate } from './components/PaymentGate';\nimport { PdfPage } from './components/PdfPage';\nimport { UploadZone } from './components/UploadZone';\nimport { blake2b256 } from './hash/blake2b256';\nimport { BitcoinOracle } from './oracles/BitcoinOracle';\nimport { DateOracle } from './oracles/DateOracle';\nimport { EthereumOracle } from './oracles/EthereumOracle';\nimport { LitecoinOracle } from './oracles/LitecoinOracle';\nimport { NytimesOracle } from './oracles/NytimesOracle';\nimport { createSigmaStampNft } from './smartcontracts/createSigmaStampNft';\n\nconst ORACLES = [\n    new BitcoinOracle(),\n    new EthereumOracle(),\n    new LitecoinOracle(),\n    new DateOracle(),\n    new NytimesOracle(),\n];\n\ninterface IAppState {\n    files: File[];\n}\n\nexport function App() {\n    const [state, setState] = useState<IAppState>({ files: [] });\n    const [payment, setPayment] = useState<null | IPaymentGateProps>(null);\n\n    if (!payment) {\n        return (\n            <AppDiv>\n                {/*\n        <button\n          onClick={() => { console.log('test'); createCertificate() }}\n        >\n          Create document\n        </button>\n            <h1>Sigmastamp</h1>*/}\n\n                {state.files.length === 0 ? (\n                    <UploadZone\n                        onFiles={async (files) => {\n                            setState({ files });\n                            /*\n                    const file = files[0];\n\n                    const hash = await blake2b256(file);\n\n                    console.log({ files, file, hash });\n\n                    const certificateFile = createCertificate({ certificateFilename: 'certificate.pdf', hash });\n\n                    const zip = new JSZip();\n                    zip.file(file.name, file);\n                    zip.file(certificateFile.name, certificateFile);\n\n                    const zipFile = await zip.generateAsync({ type: 'blob' });\n                    saveAs(zipFile, 'certificate.zip');\n                    */\n                        }}\n                        clickable\n                    >\n                        Upload your file(s) here!\n                    </UploadZone>\n                ) : (\n                    <PdfPage\n                        createUi={({ createPdf }) => {\n                            return (\n                                <button\n                                    onClick={async () => {\n                                        const certificateFile = new File(\n                                            [await createPdf()],\n                                            'certificate1.pdf' /* TODO: Maybe add current {lastModified: 1534584790000}*/,\n                                        );\n\n                                        //saveAs(certificateFile);\n\n                                        const zip = new JSZip();\n                                        for (const file of state.files) {\n                                            zip.file(file.name, file);\n                                        }\n                                        zip.file(\n                                            certificateFile.name,\n                                            certificateFile,\n                                        );\n\n                                        const zipBlob = await zip.generateAsync(\n                                            { type: 'blob' },\n                                        );\n\n                                        const zipHash = await blake2b256(\n                                            zipBlob,\n                                        );\n                                        saveAs(\n                                            zipBlob,\n                                            `certificate1.${zipHash.substring(\n                                                0,\n                                                5,\n                                            )}.zip`,\n                                        );\n\n                                        // TODO: !!! Nicer usir input than prompt\n                                        const userAddress = prompt(\n                                            'Please fill your Ergo address',\n                                            '3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV' /* !!! Unhardocde */,\n                                        );\n                                        if (!userAddress) {\n                                            return;\n                                        }\n\n                                        setPayment(\n                                            await createSigmaStampNft({\n                                                userAddress,\n                                                documentHashInBase64: zipHash,\n                                                documentHashInHex: zipHash,\n                                            }),\n                                        );\n                                    }}\n                                >\n                                    Download 1st certificate\n                                </button>\n                            );\n                        }}\n                    >\n                        {state.files.map((file) => (\n                            <AsyncContentComponent\n                                key={file.name}\n                                content={async () => {\n                                    const hash = await blake2b256(file);\n                                    return (\n                                        <>\n                                            <b>Hash of {file.name}</b> is {hash}\n                                        </>\n                                    );\n                                }}\n                            />\n                        ))}\n\n                        {ORACLES.map((oracle) => (\n                            <div key={oracle.name}>\n                                <AsyncContentComponent\n                                    content={async () => {\n                                        const data = await oracle.getData();\n\n                                        return (\n                                            <>\n                                                {Object.entries(data).map(\n                                                    ([key, value]) => (\n                                                        <div key={key}>\n                                                            <b>\n                                                                {/* @ts-ignore: Object.entries is dummy and cannot pass propper index signature type */}\n                                                                {oracle.title}\n                                                                {\n                                                                    (\n                                                                        oracle as any\n                                                                    )\n                                                                        .dataTitles[\n                                                                        key\n                                                                    ]\n                                                                }\n                                                                :\n                                                            </b>\n                                                            {value}\n                                                        </div>\n                                                    ),\n                                                )}\n                                            </>\n                                        );\n                                    }}\n                                />\n                            </div>\n                        ))}\n                    </PdfPage>\n                )}\n\n                <Link to=\"/verify\" target={'_blank'}>\n                    Or verify your 1st certificate.\n                </Link>\n            </AppDiv>\n        );\n    } else {\n        return <PaymentGate {...payment} />;\n    }\n}\n\nconst AppDiv = styled.div`\n    a {\n        color: #555;\n        font-size: 0.7em;\n    }\n`;\n","import { blake2b256 } from '../hash/blake2b256';\n\nexport async function validateFirstCertificate(firstCertificate: File) {\n    const response = await fetch(\n        `https://api-testnet.ergoplatform.com/api/v0/assets/issuingBoxes`,\n    );\n    const body = await response.json();\n\n    const hash = await blake2b256(firstCertificate);\n\n    for (const item of body.items) {\n        if (item.additionalRegisters.R8 === `0e20${hash}`) {\n            return item;\n            // TODO: probbably last not first\n        }\n    }\n\n    return null;\n}\n\nexport async function getTransactionTime(txId: string) {\n    const response = await fetch(\n        `https://api-testnet.ergoplatform.com/api/v0/transactions/${txId}`,\n    );\n    const body = await response.json();\n    console.log('getTransactionTime', body);\n    const timestamp = body.summary.timestamp;\n    const tokenId = body.outputs[0].assets[0].tokenId;\n\n    return { timestamp, tokenId };\n}\n\nexport async function getAssetHolders(tokenId: string) {\n    const response = await fetch(\n        `https://api-testnet.ergoplatform.com/api/v0/addresses/assetHolders/${tokenId}`,\n    );\n    const body = await response.json();\n    console.log('getAssetHolders', body);\n    return body;\n}\n","import JSZip from 'jszip';\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { PdfPage } from './components/PdfPage';\nimport { UploadZone } from './components/UploadZone';\nimport { blake2b256 } from './hash/blake2b256';\nimport {\n    getAssetHolders,\n    getTransactionTime,\n    validateFirstCertificate,\n} from './smartcontracts/validateFirstCertificate';\n\nexport function VerifyApp() {\n    const [files, setFiles] = useState<any>([]);\n    const [verification, setVerification] = useState<any>(null);\n\n    if (!verification) {\n        return (\n            <VerifyAppDiv>\n                <UploadZone\n                    onFiles={async (droppedFiles) => {\n                        const firstCertificate = droppedFiles[0];\n                        setFiles([droppedFiles[0]]);\n\n                        const droppedFileVerification = await validateFirstCertificate(\n                            firstCertificate,\n                        );\n\n                        if (!droppedFileVerification) {\n                            alert(\n                                `Your 1st certificate is still not validated through Ergo blockchain.`,\n                            );\n                        }\n\n                        const { txId } = droppedFileVerification;\n\n                        const { timestamp, tokenId } = await getTransactionTime(\n                            txId,\n                        );\n                        const hodlers = await getAssetHolders(tokenId);\n\n                        setVerification({\n                            ...droppedFileVerification,\n                            timestamp,\n                            tokenId,\n                            hodlers,\n                        });\n                        console.log(droppedFileVerification);\n                    }}\n                    clickable\n                >\n                    Upload your 1st certificate.\n                </UploadZone>\n                <Link to=\"/\" target={'_blank'}>\n                    Or create your 1st certificate.\n                </Link>\n            </VerifyAppDiv>\n        );\n    } else {\n        return (\n            <PdfPage\n                createUi={({ createPdf }) => {\n                    return (\n                        <button\n                            onClick={async () => {\n                                const certificateFile = new File(\n                                    [await createPdf()],\n                                    'certificate2.pdf' /* TODO: Maybe add current {lastModified: 1534584790000}*/,\n                                );\n\n                                //saveAs(certificateFile);\n\n                                const zip = new JSZip();\n                                for (const file of files) {\n                                    zip.file(file.name, file);\n                                }\n                                zip.file(certificateFile.name, certificateFile);\n\n                                const zipBlob = await zip.generateAsync({\n                                    type: 'blob',\n                                });\n\n                                const zipHash = await blake2b256(zipBlob);\n                                saveAs(\n                                    zipBlob,\n                                    `certificate2.${zipHash.substring(\n                                        0,\n                                        5,\n                                    )}.zip`,\n                                );\n                            }}\n                        >\n                            Download 2nd certificate\n                        </button>\n                    );\n                }}\n            >\n                <b>txId:</b> {verification.txId}\n                <br />\n                <b>timestamp:</b> {verification.timestamp}\n                <br />\n                <b>tokenId:</b> {verification.tokenId}\n                <br />\n                <b>hodlers:</b> {verification.hodlers.join(', ')}\n            </PdfPage>\n        );\n    }\n}\n\nconst VerifyAppDiv = styled.div`\n    a {\n        color: #555;\n        font-size: 0.7em;\n    }\n`;\n","import { createHashHistory } from 'history';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Route, Router, Switch } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { App } from './App';\nimport './index.css';\nimport { VerifyApp } from './VerifyApp';\n\nconst history = createHashHistory();\n\nconst HeaderElement = styled.header`\n    h1 {\n        font-size: 1em;\n    }\n`;\n\nReactDOM.render(\n    <React.StrictMode>\n        <HeaderElement>\n            <h1>ðŸ“œ Sigmastamp</h1>\n        </HeaderElement>\n        <Router {...{ history }}>\n            <Switch>\n                <Route exact path=\"/\">\n                    <App />\n                </Route>\n                <Route exact path=\"/verify\">\n                    <VerifyApp />\n                </Route>\n            </Switch>\n        </Router>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}